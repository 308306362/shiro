<?xml version="1.0"?>

<project name="jsecurity-ri-web" default="dist">

    <property name="root.base.dir" value="../.."/>

    <import file="../build.xml" />

    <!-- Module properties -->
    <property name="submodule.name" value="web"/>
    <property name="dist.jar.name" value="${project.name}-${module.name}-${submodule.name}.jar"/>
    <property name="dist.jar" value="${root.dist.dir}/${dist.jar.name}"/>

    <path id="compile.path">
        <pathelement location="${lib.dir}/jakarta-commons/commons-logging.jar"/>
        <pathelement location="${root.dist.dir}/${project.name}-api.jar"/>
        <pathelement location="${root.dist.dir}/${project.name}-ri-common.jar"/>
        <pathelement location="${lib.dir}/j2ee/jsp-api.jar"/>
    </path>

    <!-- ===================================================================
      -  clean - clean all build remnants from this submodule
      - ==================================================================== -->
    <target name="clean">
        <echo message="cleaning ${project.name}-${module.name}-${submodule.name} submodule"/>
        <delete file="${dist.jar}"/>
        <delete dir="${build.dir}"/>
    </target>

    <!-- ===================================================================
      -  compile - compile Java source files
      -  =================================================================== -->
    <target name="compile" depends="compile.src"/>

    <target name="jar" depends="compile">
        <jar jarfile="${dist.jar}">
            <fileset dir="${classes.dir}">
                <include name="**/*.class"/>
            </fileset>
            <manifest>
				<attribute name="Implementation-Title"
                           value="${project.name}-${module.name}-${submodule.name}"/>
				<attribute name="Implementation-Version" value="${version}"/>
				<attribute name="${project.name}-Version" value="${version}"/>
			</manifest>
            <metainf dir="${etc.dir}">
                <include name="*.tld"/>
            </metainf>
        </jar>
    </target>

    <!-- ===================================================================
      -  dist - create distribution jars (which will be used for deployment)
      -  =================================================================== -->
    <target name="dist" depends="jar">
        <copy toDir="${root.dist.dir}">
            <fileset dir="${etc.dir}" includes="*.tld"/>
        </copy>
    </target>

</project>